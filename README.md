# Spanish Conjugation Anki

Utilities for building Spanish verb conjugation flashcards for Anki.  The
repository is centred around a set of CSV files and Python scripts that
create the deck, generate example sentences with OpenAI and optionally
produce audio using ElevenLabs.

## Setup

1. Install Python 3.8+ and run `pip install -r requirements.txt`.
2. Create a `.env` file containing the required API keys (`OPENAI_API_KEY`,
   `TTS_API_KEY`, etc.).  Secrets are loaded with
   [python-dotenv](https://pypi.org/project/python-dotenv/).
3. All CSV files use UTF‑8 encoding because they contain accented Spanish
   characters.
4. Run `pytest` to execute the unit tests.

## Data files

- `verb_data/verbs.csv` – list of verbs and common collocations.
- `verb_data/tenses.csv` – grammatical tenses with trigger phrases.
- `verb_data/persons.csv` – grammatical persons.
- `cards.csv` – main table used for each flashcard; generated by
  `generate_cards_init.py` and later filled out by other tools.

## Scripts

- `generate_cards_init.py` builds the initial `cards.csv` combining every
  verb, form and person.
- `generate_example_sentences.py` adds verified conjugations and example
  sentences using the OpenAI API.
- `generate_audio.py` creates audio files for the sentences with
  ElevenLabs.
- `utilities/get_conjugation_rae.py` scrapes conjugations from the RAE
  dictionary website and outputs them in the project's JSON format.
  Reflexive verbs are handled automatically by removing the trailing
  pronoun before fetching.
- `utilities/regular_form_generator.py` provides hypothetical regular
  forms used to flag irregular conjugations.
- `csv_to_sqlite.py` loads `cards.csv` into a SQLite database
  `cards.db`.
- `table_summary.py` prints basic counts from `cards.db`.

## `cards.csv` fields

| field                              | description                                              | example                             |
|------------------------------------|----------------------------------------------------------|-------------------------------------|
| `verb`                             | infinitive form of the verb                              | `ser`                               |
| `form`                             | grammatical tense or mood                                | `indicativo_presente`               |
| `person`                           | grammatical person/number                                | `1st_singular`                      |
| `hypothetical_regular_conjugation` | conjugation if the verb were regular                     | `so`                                |
| `conjugation`                      | actual conjugation                                       | `soy`                               |
| `regularity_class`                 | how the conjugation differs from the regular form (`totally_regular`, `orthographically_irregular`, or `morphologically_irregular`) | `totally_regular` |
| `sentence`                         | example sentence using the conjugation                   | `Soy capaz de correr un maratón.`   |
| `audio_path`                       | path to the audio recording of the sentence              | `audio/1_3_11.mp3`                  |

Join the discussion on
[Discord](https://discordapp.com/channels/1373077048146264166/1373081089349783753)
for questions or improvements.
